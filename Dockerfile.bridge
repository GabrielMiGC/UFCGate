# Dockerfile for the serial bridge service
FROM python:3.11-slim

WORKDIR /app

# Install minimal deps
RUN pip install --no-cache-dir pyserial requests

# Copy the bridge script
COPY serial_bridge.py /app/serial_bridge.py

# Default environment (can be overridden by compose)
ENV SERIAL_PORT="auto" \
    SERIAL_BAUD="115200" \
    VERIFY_URL="http://web:8000/api/verify/" \
    REGISTER_URL="http://web:8000/api/register/"

CMD ["python", "/app/serial_bridge.py"]
